<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,viewport-fit=cover" />
		<title>个人demo</title>
		<!-- <script src="javascripts/jquery.js" type="text/javascript" charset="utf-8"></script> -->
		<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
		<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
		<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
		 crossorigin="anonymous">
		<script src="javascripts/tools.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascripts/zy.js" type="text/javascript" charset="utf-8"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue@2.6.9/dist/vue.js" type="text/javascript" charset="utf-8"></script>

		<style type="text/css">
			body{
				background-image: url(https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1577182903571&di=6d4e8a5e205371e13cbe89c217c86a5d&imgtype=0&src=http%3A%2F%2Fxmtxy.xjtu.edu.cn%2Fzp%2F6%2Fbackground3.jpg);
				background-size: cover;
			}
			#xg {
				color: bisque;
				cursor: pointer;
			}

			#passwordMask {
				display: none;
			}

			.bigbox {
				display: flex;
				justify-content: space-around;
				align-items: center;
			}

			.swiper_box {
				width: 90%;
				height: 22rem;
				background-color: rgba(242, 242, 242, 1);
				margin: 0 auto;
				border-radius: 0.38rem;
				background: url(images/1111111.jpg) no-repeat;
				background-size:contain;	
			}
			.nbalist{
				margin: 0 auto;
				height: 20rem;
				display: flex;
				justify-content:flex-start;
				align-items: center;
			}
			.nbalist .nbabox{
				width: 10rem;
				height: 10rem;
				display: flex;
				flex-direction: column;
			}
			.nbalist .nbabox img{
				width: 100%;
				height: 6rem;
			}
			.nbalist .nbabox p{
				text-align: left;
				font-size: 16px;
				color:black;
			}
			.nbalist .nbabox span{
				text-align: left;
				font-size: 16px;
				color:black;
			}
		</style>

	</head>

	<body>
		<div id="app">
			<nav class="navbar navbar-default">
				<div class="container-fluid">
					<!-- Brand and toggle get grouped for better mobile display -->
					<div class="navbar-header">
						<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
						 aria-expanded="false">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="index.html">主页</a>
					</div>
					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
						<ul class="nav navbar-nav">
							<li class="active" id="xg"><a href="#">修改密码 <span class="sr-only">(current)</span></a></li>
							<li>
								<a href="yzm.html">登录</a>
							</li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li><a href="yzm.html">注册</a></li>
						</ul>
					</div><!-- /.navbar-collapse -->
				</div><!-- /.container-fluid -->
			</nav>
			<!-- <div class="bigbox" style="display: none;">
				<span>主页</span>
				<span class="als">post</span>
				<a href="yzm.html">跳转</a>
				<a id="login">登录</a>
				<a id="zc">注册</a>
				<div id="xg">修改密码</div>
				<div id="quit">退出登录</div>
			</div> -->
			<div class="swiper_box">
			</div>
			<div class="nbalist"@click='tonbalist'>
				<div class="nbabox" v-for="(item,index) in alldata" :key='index'>
					<img :src="alldata.src" alt="">
					<p>{{alldata.title}}</p>
					<span>{{alldata.time}}</span>
				</div>
			</div>
	
			<div id="passwordMask">
	
				<div style="background: skyblue; width: 500px;  margin: 30px auto;">
					<h1>修改密码 <span id="close_mask" style="font-size: 80px; color: red; cursor: pointer;">×</span></h1>
					<b id="passModifyMess" style="color: red;"></b>
					<form onsubmit="return false">
						<table border="1" cellpadding="0" width="20%">
							<tr>
								<!--<td>用户名：</td>
				<td><input type="text" id="userName" /></td>
				</tr>-->
	
							<tr>
								<td>旧密码：</td>
								<td><input type="text" id="oldpass" /></td>
							</tr>
							<tr>
								<td>新密码：</td>
								<td><input type="text" id="newpass" /></td>
							</tr>
							<tr>
								<td>确认密码：</td>
								<td><input type="text" id="confirmpass" /></td>
							</tr>
							<tr>
								<td colspan="2" align="center">
									<input type="submit" id="submit" value="提交" /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<input type="reset" id="reset" value="重置" />
								</td>
							</tr>
						</table>
					</form>
	
				</div>
	
			</div>
		</div>
		
		<script type="text/javascript">
			var app = new Vue({
				el:'#app',
				data(){
					return{
						alldata:''
					}
				},
				methods:{
					tonbalist(){
						console.log('11111')
					},
					getdata(){
						$.ajax({
							type: "post",
							url: "/test/chakan",
							async: true,
							dataType: "json",
							data: {
								action: 'addd'
							}
						}).done(function(res) {
							console.log(res.data)
							this.alldata = res.data
						})
					}
				},
				mounted() {
					this.getdata()
				},
			})
			function GetQueryString(name) {
				var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
				var r = window.location.search.substr(1).match(reg);
				if (r != null) return (r[2]);
				return null;
			}
			var username = decodeURI(GetQueryString("userName"));
			console.log(typeof username)
			console.log(username)
			if (username != "null") {
				$('<a style="cursor: pointer;color:red;margin-right: 15px;margin-left: 15px;"id="username">欢迎您：' + username +
					'</a>').insertBefore($("#login"));

				$("#login").hide();
				$("#quit").show();
			} else {
				$("#login").show();
				$("#quit").hide();

			}
			$("#login").click(() => {
				window.location.href = "yzm.html"
			})
			$("#quit").click(function() {
				$.ajax({
					type: "get",
					url: "/users/quit",
					async: true,
					dataType: "json"
				}).done(function(res) {
					if (res.success) {
						alert("退出成功")
					}
					if (res.err) {
						alert("请登录")
					}
				})
			})

			$(".als").click(function() {
				$.ajax({
					type: "post",
					url: "/test/chakan",
					async: true,
					dataType: "json",
					data: {
						action: 'addd'
					}
				}).done(function(res) {
					console.log(res)
				})
			})
		</script>

	</body>

</html>
