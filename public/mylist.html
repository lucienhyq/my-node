<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,viewport-fit=cover" />
  <title>个人简历</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.9/dist/vue.js" type="text/javascript" charset="utf-8"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vant@2.5/lib/index.css">
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vant@2.5/lib/vant.min.js"></script>
  <script src="javascripts/list.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
  <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
  <style>
    body {
      background: #f2f2f7;
    }

    .header_box {
      height: 3rem;
      width: 100%;
      background: #ffffff;
      text-align: center;
      line-height: 3rem;
    }

    .card {
      width: 21.875rem;
      height: 12.5rem;
      background-color: aquamarine;
      margin: 1.03rem auto;
      border-radius: 0.938rem;
    }

    .information {
      margin: 0 0.781rem;
      background: #ffffff;
    }
  </style>
</head>

<body>
  <div id="app">
    <div id="appMain">
      <div class="header_box">个人简历</div>
      <div class="card">

      </div>
      <div class="tab_box">
        <van-tabs v-model="active">
          <van-tab title="个人信息">
            <div class="information">萨达是大学在职场中冯绍峰胜多负少大萨达阿斯达下次再下水道咁热vacvdscFQED DASASDA水电费第三方水电费阿斯达速度</div>
          </van-tab>
          <van-tab title="自我介绍">内容 2</van-tab>
        </van-tabs>
      </div>
    </div>
  </div>

  <script>
    // import wx from 'weixin-jsapi'
    // var wx = require('../js/jweixin-1.6.0')
    new Vue({
      el: '#app',
      data() {
        return {
          active: 0,
          datas: []
        }
      },
      mounted() {
        // console.log(wx)
        // console.log(vant)
        this.getPhoneEnv();
        this.setPcStyle();
        // this.getdata();

      },
      created() {
        this.share();
      },
      methods: {
        share() {
          var that = this
          $.ajax({
            type: "get",
            url: "/wx/wxJsSdkConfig",
            data: {
              url: window.location.href
            },
            async: true,
            dataType: "json",
          }).done(function (res) {
            console.log(res)
            that.datas = res;
            wx.config({
              debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
              appId: that.datas.appId, // 必填，公众号的唯一标识
              timestamp: that.datas.timestamp, // 必填，生成签名的时间戳
              nonceStr: that.datas.nonceStr, // 必填，生成签名的随机串
              signature: that.datas.signature,// 必填，签名
              jsApiList: ['updateAppMessageShareData', 'updateTimelineShareData', 'onMenuShareTimeline', 'onMenuShareAppMessage'] // 必填，需要使用的JS接口列表
            });
            wx.ready(function () {
              wx.updateAppMessageShareData({
                title: '我的测试标题', // 分享标题
                desc: '我的测试标题', // 分享描述
                link: that.datas.url, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
                imgUrl: '', // 分享图标
                success: function () {
                  // 设置成功
                }
              });
            })
          })

        },
        getdata() {
          var that = this
          $.ajax({
            type: "get",
            url: "/wx/wxJsSdkConfig",
            data: {
              url: window.location.href
            },
            async: true,
            dataType: "json",
          }).done(function (res) {
            // console.log(res)
            that.datas = res;
            // that.setinfo()
            // console.log(that)
            // that.alldata = res.data;

          })
          console.log(that.datas)
        },
        setinfo() {

        },
        //判断微信下ios和安卓 ios为1 安卓为2 其他3
        getPhoneEnv() {
          var u = navigator.userAgent,
            app = navigator.appVersion;
          var isAndroid = u.indexOf("Android") > -1 || u.indexOf("Linux") > -1; //g
          var isIOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
          console.log(isAndroid)
          if (isAndroid) {
            return "2";
          } else if (isIOS) {
            return "1";
          } else {
            return "3";
          }
        },
        setPcStyle() {
          //pc端浏览器网页或者pc端微信网页 样式
          if (this.getPhoneEnv() == 3) {
            document.getElementById("appMain").style.width = "375px";
            document.getElementById("appMain").style.margin = "0 auto";
          }
        },
      },
    });

  </script>
</body>

</html>